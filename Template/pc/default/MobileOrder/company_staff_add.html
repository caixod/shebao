<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>消息</title>

    <!-- Bootstrap -->
    <link href="__STATIC__/css/mobile_center_css/bootstrap.min.css" rel="stylesheet">
    <link href="__STATIC__/css/mobile_center_css/zhangmu.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <!--<script src="https://cdn.bootcss.com/html5shiv/3.7.3/html5shiv.min.js"></script>-->
    <!--<script src="https://cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>-->
    <!--[endif]-->
    <script src="__STATIC__/js/mobile_js/jquery.min.js"></script>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="__STATIC__/js/mobile_center_js/jquery2.14.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="__STATIC__/js/mobile_center_js/bootstrap.min.js"></script>
    <script src="__STATIC__/js/mobile_center_js/Other.js"></script>
    <link rel="stylesheet" href="__STATIC__/font_awesome/css/font-awesome.min.css">
    <script src="__PUBLIC__/js/layer/layer.js"></script>
</head>
<body>

<!--导航栏-->
<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
    <p class="nav_li nav_li1">
        <a href="{:U('MobileOrder/company_staff')}">
            <i class="fa fa-angle-double-left fa-lg"></i> 返回</a>
    </p>
    <p class="nav_li nav_title  nav_li2">员工信息编辑</p>
    <!--<p class="nav_li nav_li3"><a href="mingxi.html">明细</a></p>-->
</nav>

<section class="topheight">
    <div style="margin: 60px auto;width: 100%;height: auto;"  >


        <form role="form" method="post" action=""  enctype="multipart/form-data" id="form1">

            <div class="form-group" style="width: 70%;margin: 5px 15%;">
                <label for="username">姓名：</label>
                <input type="text" class="form-control" id="username" placeholder="请输入姓名" name="username" value="{$info.username}" style="font-size:15px;">
                <label for="mobile">联系电话：</label>
                <input type="text" class="form-control" id="mobile" placeholder="联系电话" name="mobile" value="{$info.mobile}" style="font-size:15px;">
                <label for="mobile">身份证号：</label>
                <input type="text" class="form-control" id="idcard" placeholder="身份证号码" name="idcard" value="{$info.idcard}" style="font-size:15px;">
                <label for="mobile">卡号：</label>
                <input type="text" class="form-control" id="bank_num" placeholder="首次办理社保用户必填" name="bank_num" value="{$info.bank_num}" style="font-size:15px;" >
                <label for="mobile">开户行：</label>
                <input type="text" class="form-control" id="bank_name" placeholder="首次办理社保用户必填" name="bank_name" value="{$info.bank_name}" style="font-size:15px;">
            </div>

            <div class="form-group" style="width: 70%;margin: 5px 15%;">
                <label for="mobile">性别：</label>
                <label class="radio-inline">
                    <input type="radio" name="sex" <if condition="$info.sex eq 1">checked="checked"</if>  value="1" >男
                </label>
                <label class="radio-inline">
                    <input type="radio" name="sex" <if condition="$info.sex eq 2">checked="checked"</if>   value="2"> 女
                </label>
            </div>
            <div class="form-group" style="width: 70%;margin: 5px 15%;">
                <label for="mobile">户口性质：</label>
                <label class="radio-inline">
                    <input type="radio" name="nature" id="nature" value="1"  <if condition="$info.nature eq 1">checked="checked"</if>  >农村
                </label>
                <label class="radio-inline">
                    <input type="radio" name="nature" id="optionsRadios4"  value="2"   <if condition="$info.nature eq 2">checked="checked"</if> >  城镇
                </label>
            </div>
            <div class="form-group" style="width: 70%;margin: 5px 15%;">
                <label class="" for="image">上传身份证正面：</label><br>
                <input type="file" name="image" value="" id="image" style="display: inline-block;width: 50%;" >


                <notempty  name="info['image']">
                    <a href="{$info.image}" ><i class="fa fa-link"></i> 查看</a>
                </notempty >
               <br>
                <label class=""  for="image_t">上传身份证反面：</label><br>
                <input type="file" name="image_t" value="" id="image_t"  style="display: inline-block;width: 50%;" >
                <notempty  name="info['image_t']">
                    <a href="{$info.image_t}" ><i class="fa fa-link"></i> 查看</a>
                </notempty >
            </div>

            <input type="hidden" name="user_id" value="{$info.user_id}" >
            <button type="button" class="btn btn-success  btn-block" onclick="checkForm();" style="width: 70%;margin: 15px 15%;">保存</button>
        </form>
    </div>
</section>

<script>
    var user_id={$user_id};

    function checkForm() {

        var username = $.trim($('#username').val());
        var mobile = $.trim($('#mobile').val());
        var idcard = $.trim($('#idcard').val());
        var bank_num = $.trim($('#bank_num').val());
        var bank_name = $.trim($('#bank_name').val());
        var image = $.trim($('#image').val());
        var image_t = $.trim($('#image_t').val());
        var sex = $("input[name='sex']:checked").val();
        var nature = $("input[name='nature']:checked").val();

        var pattern = /^1[34578]\d{9}$/;
        var pattern_idcard = /(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/;
        var pattern_card = /^[0-9]*$/;

        if (username == '') {
            layer.alert('请输入您的姓名', {icon: 2});
            return false;
        }
        if (mobile == '' || !pattern.test(mobile)) {
            layer.alert('请填写正确的电话号码', {icon: 2});
            return false;
        }
        if (idcard == '' || !pattern_idcard.test(idcard)) {
            layer.alert('请填写正确的身份证号', {icon: 2});
            return false;
        }
        // if (bank_num == '' || !pattern_card.test(bank_num)) {
        //     layer.alert('请填写正确的卡号', {icon: 2});
        //     return false;
        // }
        // if (bank_name == '') {
        //     layer.alert('请填写开户行', {icon: 2});
        //     return false;
        // }
        if (typeof(sex)== 'undefined') {
            layer.alert('请选择性别', {icon: 2});
            return false;
        }
        if (typeof(nature)== 'undefined') {
            layer.alert('请选择户口性质', {icon: 2});
            return false;
        }
        if (user_id==0 && (image=="" || image_t=="")) {
            layer.alert('请上传身份证信息', {icon: 2});
            return false;
        }
        if(bank_num==""){
            var index=layer.confirm('如果是首次办理社保用户务必填写银行卡信息', {
                btn: ['继续提交','取消'] //按钮
            }, function(index){
                $("#form1").submit();
            }, function(index){
                layer.close(index);
            });
        }else{
            $("#form1").submit();
        }

    }
</script>
</body>
</html>